@model IEnumerable<LMS_mastery.Models.DTOsView.TeacherDashboard>

@{
    ViewBag.Title = "Index";
}
<h2>Teacher Dashboard</h2>
<br /><br />
<h4>My Classes</h4>
<div class="row" ng-app="SummaryModule">
    <div class="col-sm-12">
        <fieldset ng-controller="SummaryCtrl">
            <div class="row">
                <div class="col-sm-3">
                    @Html.ActionLink("Add Class", "AddClass", "Teacher", new { @class = "btn btn-primary" })
                </div>
                <div class="col-sm-5">

                </div>
                <div class="col-sm-2">
                    <button class="btn" ng-class="{'btn-primary': currentSelected}" ng-click="selectCurrent(true)">Current (@Model.Count(c => !c.IsArchived))</button>
                </div>
                <div class="col-sm-2">
                    <button class="btn" ng-class="{'btn-primary': !currentSelected}" ng-click="selectCurrent(false)">Archived(@Model.Count(c => c.IsArchived))</button>
                </div>
            </div>
            <table class="table" ng-show="currentSelected">
                <tbody>
                    @foreach (var summary in Model.Where(s => !s.IsArchived))
                    {
                        <tr>
                            <td>@summary.Name</td>
                            <td>@summary.NumberOfStudents students</td>
                        </tr>
                    }
                </tbody>
            </table>
            <table class="table" ng-hide="currentSelected">
                <tbody>
                    @foreach (var summary in Model.Where(s => s.IsArchived))
                    {
                        <tr>
                            <td>@summary.Name</td>
                            <td>@summary.NumberOfStudents students</td>
                        </tr>
                    }
                </tbody>
            </table>
        </fieldset>
    </div>
</div>

@section scripts{
    <script src="~/Scripts/angular.min.js"></script>
    <script>
        var summary = angular.module('SummaryModule', []);

        summary.controller('SummaryCtrl', function ($scope) {
            $scope.currentSelected = true;

            $scope.selectCurrent = function (value) {
                $scope.currentSelected = value;
            };
        });
    </script>
}


